{"version":3,"sources":["../src/croppie.js"],"names":["root","factory","define","amd","exports","nodeName","module","Croppie","self","Promise","a","b","apply","arguments","c","TypeError","_state","_value","_deferreds","i","e","f","d","push","k","onFulfilled","onRejected","resolve","reject","then","g","call","length","h","j","setTimeout","setImmediate","l","Array","isArray","Object","prototype","toString","all","slice","constructor","race","_setImmediateFn","window","CustomEvent","event","params","bubbles","cancelable","detail","evt","document","createEvent","initCustomEvent","Event","HTMLCanvasElement","toBlob","defineProperty","value","callback","type","quality","binStr","atob","toDataURL","split","len","arr","Uint8Array","charCodeAt","Blob","cssPrefixes","emptyStyles","createElement","style","EXIF_NORM","EXIF_FLIP","CSS_TRANS_ORG","CSS_TRANSFORM","CSS_USERSELECT","vendorPrefix","prop","capProp","toUpperCase","getExifOffset","ornt","rotate","indexOf","index","offset","deepExtend","destination","source","property","clone","object","dispatchChange","element","initEvent","dispatchEvent","fireEvent","css","el","styles","val","tmp","addClass","classList","add","className","removeClass","remove","replace","setAttributes","attrs","key","setAttribute","num","v","parseInt","loadImage","src","doExif","img","Image","opacity","_resolve","removeAttribute","match","onload","EXIF","getData","onerror","ev","naturalImageDimensions","w","naturalWidth","naturalHeight","orient","getExifOrientation","x","width","height","TRANSLATE_OPTS","suffix","Transform","y","scale","parseFloat","parse","fromMatrix","fromString","vals","substring","values","translate","globals","TransformOrigin","exifdata","Orientation","drawCanvas","canvas","orientation","ctx","getContext","save","Math","PI","drawImage","restore","_create","customViewportClass","options","viewport","boundary","overlay","bw","bh","useCanvas","enableOrientation","_hasExif","data","elements","preview","isNaN","appendChild","customClass","_initDraggable","enableZoom","_initializeZoom","enableResize","_initializeResize","enableExif","wrap","isDragging","direction","originalX","originalY","minSize","maxWidth","maxHeight","vr","hr","resizeControls","mouseDown","button","preventDefault","overlayRect","getBoundingClientRect","pageX","pageY","currentTarget","touches","addEventListener","mouseMove","mouseUp","body","deltaX","deltaY","newHeight","newWidth","_updateOverlay","_updateZoomLimits","_updateCenterPoint","_triggerUpdate","removeEventListener","_setZoomerVal","z","zoomer","fix","max","min","zoomerWrap","step","display","showZoomer","_currentZoom","change","_onZoom","origin","viewportRect","transform","scroll","delta","targetZoom","mouseWheelZoom","ctrlKey","wheelDelta","ui","vpRect","applyCss","transCss","enforceBoundary","boundaries","_getVirtualBoundaries","transBoundaries","oBoundaries","maxX","minX","maxY","minY","_debouncedOverlay","vpWidth","vpHeight","centerFromBoundaryX","clientWidth","centerFromBoundaryY","clientHeight","imgRect","curImgWidth","curImgHeight","halfWidth","halfHeight","originMinX","originMinY","vpData","pc","top","left","center","adj","cx","cy","tx","ty","newCss","originalDistance","assignTransformCoordinates","bottom","right","toggleGrabState","keyDown","shiftKey","keyCode","zoom","setZoom","enableKeyMovement","movement","parseKeyDown","keyMove","touch1","touch2","dist","sqrt","boundRect","imgData","func","wait","immediate","timeout","context","args","callNow","clearTimeout","later","get","_isVisible","update","$","Prototype","trigger","offsetHeight","offsetWidth","_updatePropertiesFromImage","cssReset","transformReset","originReset","isVisible","bound","_originalImageWidth","_originalImageHeight","points","_bindPoints","_centerImage","initial","minZoom","maxZoom","initialZoom","defaultInitialZoom","boundaryData","minW","minH","boundZoom","pointsWidth","vpOffset","originTop","originLeft","transformTop","transformLeft","imgDim","vpDim","boundDim","vpLeft","vpTop","_transferImageToCanvas","customOrientation","clearRect","_getCanvas","circle","canvasWidth","outputWidth","canvasHeight","outputHeight","backgroundColor","fillStyle","fillRect","sx","sy","sWidth","sHeight","dx","dy","dWidth","dHeight","abs","globalCompositeOperation","beginPath","arc","closePath","fill","_getHtmlResult","div","url","_getBase64Result","format","_getBlobResult","blob","_replaceImage","parentNode","forEach","replaceChild","_bind","cb","hasExif","natDim","rect","aspectRatio","imgAspectRatio","x0","y0","x1","y1","relative","map","p","decimalPoints","toFixed","_get","widthDiff","heightDiff","x2","y2","Number","NEGATIVE_INFINITY","RESULT_DEFAULTS","RESULT_FORMATS","_result","opts","resultType","size","ratio","prom","toLowerCase","_refresh","_rotate","deg","oldHeight","oldWidth","_destroy","removeChild","jQuery","fn","croppie","ot","singleInst","result","bind","each","method","isFunction","removeData","Error","defaults","tagName","origImage","replacementDiv","bindOpts","orientationControls","enabled","leftClass","rightClass","refresh","destroy"],"mappings":"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","sourcesContent":["/*eslint-disable*/\r\n\r\n/*************************\r\n * Croppie\r\n * Copyright 2019\r\n * Foliotek\r\n * Version: 2.6.5\r\n *************************/\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(factory);\r\n    } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {\r\n        // CommonJS\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser globals\r\n        root.Croppie = factory();\r\n    }\r\n}(typeof self !== 'undefined' ? self : this, function () {\r\n\r\n    /* Polyfills */\r\n    if (typeof Promise !== 'function') {\r\n        /*! promise-polyfill 3.1.0 */\r\n        !function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if(\"object\"!==typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!==typeof a)throw new TypeError(\"not a function\");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError(\"A promise cannot be resolved with itself.\");if(a&&(\"object\"===typeof a||\"function\"===typeof a)){var c=a.then;if(\"function\"===typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled=\"function\"===typeof a?a:null,this.onRejected=\"function\"===typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=setTimeout,k=\"function\"===typeof setImmediate&&setImmediate||function(a){j(a,1)},l=Array.isArray||function(a){return\"[object Array]\"===Object.prototype.toString.call(a)};c.prototype[\"catch\"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&(\"object\"===typeof g||\"function\"===typeof g)){var h=g.then;if(\"function\"===typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&\"object\"===typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){k=a},\"undefined\"!==typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);\r\n    }\r\n\r\n    if (typeof window !== 'undefined' && typeof window.CustomEvent !== \"function\") {\r\n        (function(){\r\n            function CustomEvent ( event, params ) {\r\n                params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n                var evt = document.createEvent( 'CustomEvent' );\r\n                evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\r\n                return evt;\r\n            }\r\n            CustomEvent.prototype = window.Event.prototype;\r\n            window.CustomEvent = CustomEvent;\r\n        }());\r\n    }\r\n\r\n    if (typeof HTMLCanvasElement !== 'undefined' && !HTMLCanvasElement.prototype.toBlob) {\r\n        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\r\n            value: function (callback, type, quality) {\r\n                var binStr = atob( this.toDataURL(type, quality).split(',')[1] ),\r\n                len = binStr.length,\r\n                arr = new Uint8Array(len);\r\n\r\n                for (var i=0; i<len; i++ ) {\r\n                    arr[i] = binStr.charCodeAt(i);\r\n                }\r\n\r\n                callback( new Blob( [arr], {type: type || 'image/png'} ) );\r\n            }\r\n        });\r\n    }\r\n    /* End Polyfills */\r\n\r\n    var cssPrefixes = ['Webkit', 'Moz', 'ms'],\r\n        emptyStyles = typeof document !== 'undefined' ? document.createElement('div').style : {},\r\n        EXIF_NORM = [1,8,3,6],\r\n        EXIF_FLIP = [2,7,4,5],\r\n        CSS_TRANS_ORG,\r\n        CSS_TRANSFORM,\r\n        CSS_USERSELECT;\r\n\r\n    function vendorPrefix(prop) {\r\n        if (prop in emptyStyles) {\r\n            return prop;\r\n        }\r\n\r\n        var capProp = prop[0].toUpperCase() + prop.slice(1),\r\n            i = cssPrefixes.length;\r\n\r\n        while (i--) {\r\n            prop = cssPrefixes[i] + capProp;\r\n            if (prop in emptyStyles) {\r\n                return prop;\r\n            }\r\n        }\r\n    }\r\n\r\n    CSS_TRANSFORM = vendorPrefix('transform');\r\n    CSS_TRANS_ORG = vendorPrefix('transformOrigin');\r\n    CSS_USERSELECT = vendorPrefix('userSelect');\r\n\r\n    function getExifOffset(ornt, rotate) {\r\n        var arr = EXIF_NORM.indexOf(ornt) > -1 ? EXIF_NORM : EXIF_FLIP,\r\n            index = arr.indexOf(ornt),\r\n            offset = (rotate / 90) % arr.length;// 180 = 2%4 = 2 shift exif by 2 indexes\r\n\r\n        return arr[(arr.length + index + (offset % arr.length)) % arr.length];\r\n    }\r\n\r\n    // Credits to : Andrew Dupont - http://andrewdupont.net/2009/08/28/deep-extending-objects-in-javascript/\r\n    function deepExtend(destination, source) {\r\n        destination = destination || {};\r\n        for (var property in source) {\r\n            if (source[property] && source[property].constructor && source[property].constructor === Object) {\r\n                destination[property] = destination[property] || {};\r\n                deepExtend(destination[property], source[property]);\r\n            } else {\r\n                destination[property] = source[property];\r\n            }\r\n        }\r\n        return destination;\r\n    }\r\n\r\n    function clone(object) {\r\n        return deepExtend({}, object);\r\n    }\r\n\r\n    function debounce(func, wait, immediate) {\r\n        var timeout;\r\n        return function () {\r\n            var context = this, args = arguments;\r\n            var later = function () {\r\n                timeout = null;\r\n                if (!immediate) func.apply(context, args);\r\n            };\r\n            var callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) func.apply(context, args);\r\n        };\r\n    }\r\n\r\n    function dispatchChange(element) {\r\n        if (\"createEvent\" in document) {\r\n            var evt = document.createEvent(\"HTMLEvents\");\r\n            evt.initEvent(\"change\", false, true);\r\n            element.dispatchEvent(evt);\r\n        }\r\n        else {\r\n            element.fireEvent(\"onchange\");\r\n        }\r\n    }\r\n\r\n    //http://jsperf.com/vanilla-css\r\n    function css(el, styles, val) {\r\n        if (typeof (styles) === 'string') {\r\n            var tmp = styles;\r\n            styles = {};\r\n            styles[tmp] = val;\r\n        }\r\n\r\n        for (var prop in styles) {\r\n            el.style[prop] = styles[prop];\r\n        }\r\n    }\r\n\r\n    function addClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.add(c);\r\n        }\r\n        else {\r\n            el.className += ' ' + c;\r\n        }\r\n    }\r\n\r\n    function removeClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.remove(c);\r\n        }\r\n        else {\r\n            el.className = el.className.replace(c, '');\r\n        }\r\n    }\r\n\r\n    function setAttributes(el, attrs) {\r\n        for (var key in attrs) {\r\n            el.setAttribute(key, attrs[key]);\r\n        }\r\n    }\r\n\r\n    function num(v) {\r\n        return parseInt(v, 10);\r\n    }\r\n\r\n    /* Utilities */\r\n    function loadImage(src, doExif) {\r\n        if (!src) { throw 'Source image missing'; }\r\n\r\n        var img = new Image();\r\n        img.style.opacity = '0';\r\n        return new Promise(function (resolve, reject) {\r\n            function _resolve() {\r\n                img.style.opacity = '1';\r\n                setTimeout(function () {\r\n                    resolve(img);\r\n                }, 1);\r\n            }\r\n\r\n            img.removeAttribute('crossOrigin');\r\n            if (src.match(/^https?:\\/\\/|^\\/\\//)) {\r\n                img.setAttribute('crossOrigin', 'anonymous');\r\n            }\r\n\r\n            img.onload = function () {\r\n                if (doExif) {\r\n                    EXIF.getData(img, function () {\r\n                        _resolve();\r\n                    });\r\n                }\r\n                else {\r\n                    _resolve();\r\n                }\r\n            };\r\n            img.onerror = function (ev) {\r\n                img.style.opacity = 1;\r\n                setTimeout(function () {\r\n                    reject(ev);\r\n                }, 1);\r\n            };\r\n            img.src = src;\r\n        });\r\n    }\r\n\r\n    function naturalImageDimensions(img, ornt) {\r\n        var w = img.naturalWidth;\r\n        var h = img.naturalHeight;\r\n        var orient = ornt || getExifOrientation(img);\r\n        if (orient && orient >= 5) {\r\n            var x= w;\r\n            w = h;\r\n            h = x;\r\n        }\r\n        return { width: w, height: h };\r\n    }\r\n\r\n    /* CSS Transform Prototype */\r\n    var TRANSLATE_OPTS = {\r\n        'translate3d': {\r\n            suffix: ', 0px'\r\n        },\r\n        'translate': {\r\n            suffix: ''\r\n        }\r\n    };\r\n    var Transform = function (x, y, scale) {\r\n        this.x = parseFloat(x);\r\n        this.y = parseFloat(y);\r\n        this.scale = parseFloat(scale);\r\n    };\r\n\r\n    Transform.parse = function (v) {\r\n        if (v.style) {\r\n            return Transform.parse(v.style[CSS_TRANSFORM]);\r\n        }\r\n        else if (v.indexOf('matrix') > -1 || v.indexOf('none') > -1) {\r\n            return Transform.fromMatrix(v);\r\n        }\r\n        else {\r\n            return Transform.fromString(v);\r\n        }\r\n    };\r\n\r\n    Transform.fromMatrix = function (v) {\r\n        var vals = v.substring(7).split(',');\r\n        if (!vals.length || v === 'none') {\r\n            vals = [1, 0, 0, 1, 0, 0];\r\n        }\r\n\r\n        return new Transform(num(vals[4]), num(vals[5]), parseFloat(vals[0]));\r\n    };\r\n\r\n    Transform.fromString = function (v) {\r\n        var values = v.split(') '),\r\n            translate = values[0].substring(Croppie.globals.translate.length + 1).split(','),\r\n            scale = values.length > 1 ? values[1].substring(6) : 1,\r\n            x = translate.length > 1 ? translate[0] : 0,\r\n            y = translate.length > 1 ? translate[1] : 0;\r\n\r\n        return new Transform(x, y, scale);\r\n    };\r\n\r\n    Transform.prototype.toString = function () {\r\n        var suffix = TRANSLATE_OPTS[Croppie.globals.translate].suffix || '';\r\n        return Croppie.globals.translate + '(' + this.x + 'px, ' + this.y + 'px' + suffix + ') scale(' + this.scale + ')';\r\n    };\r\n\r\n    var TransformOrigin = function (el) {\r\n        if (!el || !el.style[CSS_TRANS_ORG]) {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            return;\r\n        }\r\n        var css = el.style[CSS_TRANS_ORG].split(' ');\r\n        this.x = parseFloat(css[0]);\r\n        this.y = parseFloat(css[1]);\r\n    };\r\n\r\n    TransformOrigin.prototype.toString = function () {\r\n        return this.x + 'px ' + this.y + 'px';\r\n    };\r\n\r\n    function getExifOrientation (img) {\r\n        return img.exifdata && img.exifdata.Orientation ? num(img.exifdata.Orientation) : 1;\r\n    }\r\n\r\n    function drawCanvas(canvas, img, orientation) {\r\n        var width = img.width,\r\n            height = img.height,\r\n            ctx = canvas.getContext('2d');\r\n\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        ctx.save();\r\n        switch (orientation) {\r\n          case 2:\r\n             ctx.translate(width, 0);\r\n             ctx.scale(-1, 1);\r\n             break;\r\n\r\n          case 3:\r\n              ctx.translate(width, height);\r\n              ctx.rotate(180*Math.PI/180);\r\n              break;\r\n\r\n          case 4:\r\n              ctx.translate(0, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 5:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 6:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.translate(0, -height);\r\n              break;\r\n\r\n          case 7:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(-90*Math.PI/180);\r\n              ctx.translate(-width, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 8:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.translate(0, width);\r\n              ctx.rotate(-90*Math.PI/180);\r\n              break;\r\n        }\r\n        ctx.drawImage(img, 0,0, width, height);\r\n        ctx.restore();\r\n    }\r\n\r\n    /* Private Methods */\r\n    function _create() {\r\n        var self = this,\r\n            contClass = 'croppie-container',\r\n            customViewportClass = self.options.viewport.type ? 'cr-vp-' + self.options.viewport.type : null,\r\n            boundary, img, viewport, overlay, bw, bh;\r\n\r\n        self.options.useCanvas = self.options.enableOrientation || _hasExif.call(self);\r\n        // Properties on class\r\n        self.data = {};\r\n        self.elements = {};\r\n\r\n        boundary = self.elements.boundary = document.createElement('div');\r\n        viewport = self.elements.viewport = document.createElement('div');\r\n        img = self.elements.img = document.createElement('img');\r\n        overlay = self.elements.overlay = document.createElement('div');\r\n\r\n        if (self.options.useCanvas) {\r\n            self.elements.canvas = document.createElement('canvas');\r\n            self.elements.preview = self.elements.canvas;\r\n        }\r\n        else {\r\n            self.elements.preview = img;\r\n        }\r\n\r\n        addClass(boundary, 'cr-boundary');\r\n        boundary.setAttribute('aria-dropeffect', 'none');\r\n        bw = self.options.boundary.width;\r\n        bh = self.options.boundary.height;\r\n        css(boundary, {\r\n            width: (bw + (isNaN(bw) ? '' : 'px')),\r\n            height: (bh + (isNaN(bh) ? '' : 'px'))\r\n        });\r\n\r\n        addClass(viewport, 'cr-viewport');\r\n        if (customViewportClass) {\r\n            addClass(viewport, customViewportClass);\r\n        }\r\n        css(viewport, {\r\n            width: self.options.viewport.width + 'px',\r\n            height: self.options.viewport.height + 'px'\r\n        });\r\n        viewport.setAttribute('tabindex', 0);\r\n\r\n        addClass(self.elements.preview, 'cr-image');\r\n        setAttributes(self.elements.preview, { 'alt': 'preview', 'aria-grabbed': 'false' });\r\n        addClass(overlay, 'cr-overlay');\r\n\r\n        self.element.appendChild(boundary);\r\n        boundary.appendChild(self.elements.preview);\r\n        boundary.appendChild(viewport);\r\n        boundary.appendChild(overlay);\r\n\r\n        addClass(self.element, contClass);\r\n        if (self.options.customClass) {\r\n            addClass(self.element, self.options.customClass);\r\n        }\r\n\r\n        _initDraggable.call(this);\r\n\r\n        if (self.options.enableZoom) {\r\n            _initializeZoom.call(self);\r\n        }\r\n\r\n        // if (self.options.enableOrientation) {\r\n        //     _initRotationControls.call(self);\r\n        // }\r\n\r\n        if (self.options.enableResize) {\r\n            _initializeResize.call(self);\r\n        }\r\n    }\r\n\r\n    // function _initRotationControls () {\r\n    //     var self = this,\r\n    //         wrap, btnLeft, btnRight, iLeft, iRight;\r\n\r\n    //     wrap = document.createElement('div');\r\n    //     self.elements.orientationBtnLeft = btnLeft = document.createElement('button');\r\n    //     self.elements.orientationBtnRight = btnRight = document.createElement('button');\r\n\r\n    //     wrap.appendChild(btnLeft);\r\n    //     wrap.appendChild(btnRight);\r\n\r\n    //     iLeft = document.createElement('i');\r\n    //     iRight = document.createElement('i');\r\n    //     btnLeft.appendChild(iLeft);\r\n    //     btnRight.appendChild(iRight);\r\n\r\n    //     addClass(wrap, 'cr-rotate-controls');\r\n    //     addClass(btnLeft, 'cr-rotate-l');\r\n    //     addClass(btnRight, 'cr-rotate-r');\r\n\r\n    //     self.elements.boundary.appendChild(wrap);\r\n\r\n    //     btnLeft.addEventListener('click', function () {\r\n    //         self.rotate(-90);\r\n    //     });\r\n    //     btnRight.addEventListener('click', function () {\r\n    //         self.rotate(90);\r\n    //     });\r\n    // }\r\n\r\n    function _hasExif() {\r\n        return this.options.enableExif && window.EXIF;\r\n    }\r\n\r\n    function _initializeResize () {\r\n        var self = this;\r\n        var wrap = document.createElement('div');\r\n        var isDragging = false;\r\n        var direction;\r\n        var originalX;\r\n        var originalY;\r\n        var minSize = 50;\r\n        var maxWidth;\r\n        var maxHeight;\r\n        var vr;\r\n        var hr;\r\n\r\n        addClass(wrap, 'cr-resizer');\r\n        css(wrap, {\r\n            width: this.options.viewport.width + 'px',\r\n            height: this.options.viewport.height + 'px'\r\n        });\r\n\r\n        if (this.options.resizeControls.height) {\r\n            vr = document.createElement('div');\r\n            addClass(vr, 'cr-resizer-vertical');\r\n            wrap.appendChild(vr);\r\n        }\r\n\r\n        if (this.options.resizeControls.width) {\r\n            hr = document.createElement('div');\r\n            addClass(hr, 'cr-resizer-horisontal');\r\n            wrap.appendChild(hr);\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            if (ev.button !== undefined && ev.button !== 0) return;\r\n\r\n            ev.preventDefault();\r\n            if (isDragging) {\r\n                return;\r\n            }\r\n\r\n            var overlayRect = self.elements.overlay.getBoundingClientRect();\r\n\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n            direction = ev.currentTarget.className.indexOf('vertical') !== -1 ? 'v' : 'h';\r\n            maxWidth = overlayRect.width;\r\n            maxHeight = overlayRect.height;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            var pageX = ev.pageX;\r\n            var pageY = ev.pageY;\r\n\r\n            ev.preventDefault();\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX;\r\n            var deltaY = pageY - originalY;\r\n            var newHeight = self.options.viewport.height + deltaY;\r\n            var newWidth = self.options.viewport.width + deltaX;\r\n\r\n            if (direction === 'v' && newHeight >= minSize && newHeight <= maxHeight) {\r\n                css(wrap, {\r\n                    height: newHeight + 'px'\r\n                });\r\n\r\n                self.options.boundary.height += deltaY;\r\n                css(self.elements.boundary, {\r\n                    height: self.options.boundary.height + 'px'\r\n                });\r\n\r\n                self.options.viewport.height += deltaY;\r\n                css(self.elements.viewport, {\r\n                    height: self.options.viewport.height + 'px'\r\n                });\r\n            }\r\n            else if (direction === 'h' && newWidth >= minSize && newWidth <= maxWidth) {\r\n                css(wrap, {\r\n                    width: newWidth + 'px'\r\n                });\r\n\r\n                self.options.boundary.width += deltaX;\r\n                css(self.elements.boundary, {\r\n                    width: self.options.boundary.width + 'px'\r\n                });\r\n\r\n                self.options.viewport.width += deltaX;\r\n                css(self.elements.viewport, {\r\n                    width: self.options.viewport.width + 'px'\r\n                });\r\n            }\r\n\r\n            _updateOverlay.call(self);\r\n            _updateZoomLimits.call(self);\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n        }\r\n\r\n        if (vr) {\r\n            vr.addEventListener('mousedown', mouseDown);\r\n            vr.addEventListener('touchstart', mouseDown);\r\n        }\r\n\r\n        if (hr) {\r\n            hr.addEventListener('mousedown', mouseDown);\r\n            hr.addEventListener('touchstart', mouseDown);\r\n        }\r\n\r\n        this.elements.boundary.appendChild(wrap);\r\n    }\r\n\r\n    function _setZoomerVal(v) {\r\n        if (this.options.enableZoom) {\r\n            var z = this.elements.zoomer,\r\n                val = fix(v, 4);\r\n\r\n            z.value = Math.max(parseFloat(z.min), Math.min(parseFloat(z.max), val)).toString();\r\n        }\r\n    }\r\n\r\n    function _initializeZoom() {\r\n        var self = this,\r\n            wrap = self.elements.zoomerWrap = document.createElement('div'),\r\n            zoomer = self.elements.zoomer = document.createElement('input');\r\n\r\n        addClass(wrap, 'cr-slider-wrap');\r\n        addClass(zoomer, 'cr-slider');\r\n        zoomer.type = 'range';\r\n        zoomer.step = '0.0001';\r\n        zoomer.value = '1';\r\n        zoomer.style.display = self.options.showZoomer ? '' : 'none';\r\n        zoomer.setAttribute('aria-label', 'zoom');\r\n\r\n        self.element.appendChild(wrap);\r\n        wrap.appendChild(zoomer);\r\n\r\n        self._currentZoom = 1;\r\n\r\n        function change() {\r\n            _onZoom.call(self, {\r\n                value: parseFloat(zoomer.value),\r\n                origin: new TransformOrigin(self.elements.preview),\r\n                viewportRect: self.elements.viewport.getBoundingClientRect(),\r\n                transform: Transform.parse(self.elements.preview)\r\n            });\r\n        }\r\n\r\n        function scroll(ev) {\r\n            var delta, targetZoom;\r\n\r\n            if(self.options.mouseWheelZoom === 'ctrl' && ev.ctrlKey !== true){\r\n              return 0;\r\n            } else if (ev.wheelDelta) {\r\n                delta = ev.wheelDelta / 1200; //wheelDelta min: -120 max: 120 // max x 10 x 2\r\n            } else if (ev.deltaY) {\r\n                delta = ev.deltaY / 1060; //deltaY min: -53 max: 53 // max x 10 x 2\r\n            } else if (ev.detail) {\r\n                delta = ev.detail / -60; //delta min: -3 max: 3 // max x 10 x 2\r\n            } else {\r\n                delta = 0;\r\n            }\r\n\r\n            targetZoom = self._currentZoom + (delta * self._currentZoom);\r\n\r\n            ev.preventDefault();\r\n            _setZoomerVal.call(self, targetZoom);\r\n            change.call(self);\r\n        }\r\n\r\n        self.elements.zoomer.addEventListener('input', change);// this is being fired twice on keypress\r\n        self.elements.zoomer.addEventListener('change', change);\r\n\r\n        if (self.options.mouseWheelZoom) {\r\n            self.elements.boundary.addEventListener('mousewheel', scroll);\r\n            self.elements.boundary.addEventListener('DOMMouseScroll', scroll);\r\n        }\r\n    }\r\n\r\n    function _onZoom(ui) {\r\n        var self = this,\r\n            transform = ui ? ui.transform : Transform.parse(self.elements.preview),\r\n            vpRect = ui ? ui.viewportRect : self.elements.viewport.getBoundingClientRect(),\r\n            origin = ui ? ui.origin : new TransformOrigin(self.elements.preview);\r\n\r\n        function applyCss() {\r\n            var transCss = {};\r\n            transCss[CSS_TRANSFORM] = transform.toString();\r\n            transCss[CSS_TRANS_ORG] = origin.toString();\r\n            css(self.elements.preview, transCss);\r\n        }\r\n\r\n        self._currentZoom = ui ? ui.value : self._currentZoom;\r\n        transform.scale = self._currentZoom;\r\n        self.elements.zoomer.setAttribute('aria-valuenow', self._currentZoom);\r\n        applyCss();\r\n\r\n        if (self.options.enforceBoundary) {\r\n            var boundaries = _getVirtualBoundaries.call(self, vpRect),\r\n                transBoundaries = boundaries.translate,\r\n                oBoundaries = boundaries.origin;\r\n\r\n            if (transform.x >= transBoundaries.maxX) {\r\n                origin.x = oBoundaries.minX;\r\n                transform.x = transBoundaries.maxX;\r\n            }\r\n\r\n            if (transform.x <= transBoundaries.minX) {\r\n                origin.x = oBoundaries.maxX;\r\n                transform.x = transBoundaries.minX;\r\n            }\r\n\r\n            if (transform.y >= transBoundaries.maxY) {\r\n                origin.y = oBoundaries.minY;\r\n                transform.y = transBoundaries.maxY;\r\n            }\r\n\r\n            if (transform.y <= transBoundaries.minY) {\r\n                origin.y = oBoundaries.maxY;\r\n                transform.y = transBoundaries.minY;\r\n            }\r\n        }\r\n        applyCss();\r\n        _debouncedOverlay.call(self);\r\n        _triggerUpdate.call(self);\r\n    }\r\n\r\n    function _getVirtualBoundaries(viewport) {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            vpWidth = viewport.width,\r\n            vpHeight = viewport.height,\r\n            centerFromBoundaryX = self.elements.boundary.clientWidth / 2,\r\n            centerFromBoundaryY = self.elements.boundary.clientHeight / 2,\r\n            imgRect = self.elements.preview.getBoundingClientRect(),\r\n            curImgWidth = imgRect.width,\r\n            curImgHeight = imgRect.height,\r\n            halfWidth = vpWidth / 2,\r\n            halfHeight = vpHeight / 2;\r\n\r\n        var maxX = ((halfWidth / scale) - centerFromBoundaryX) * -1;\r\n        var minX = maxX - ((curImgWidth * (1 / scale)) - (vpWidth * (1 / scale)));\r\n\r\n        var maxY = ((halfHeight / scale) - centerFromBoundaryY) * -1;\r\n        var minY = maxY - ((curImgHeight * (1 / scale)) - (vpHeight * (1 / scale)));\r\n\r\n        var originMinX = (1 / scale) * halfWidth;\r\n        var originMaxX = (curImgWidth * (1 / scale)) - originMinX;\r\n\r\n        var originMinY = (1 / scale) * halfHeight;\r\n        var originMaxY = (curImgHeight * (1 / scale)) - originMinY;\r\n\r\n        return {\r\n            translate: {\r\n                maxX: maxX,\r\n                minX: minX,\r\n                maxY: maxY,\r\n                minY: minY\r\n            },\r\n            origin: {\r\n                maxX: originMaxX,\r\n                minX: originMinX,\r\n                maxY: originMaxY,\r\n                minY: originMinY\r\n            }\r\n        };\r\n    }\r\n\r\n    function _updateCenterPoint(rotate) {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            data = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            transform = Transform.parse(self.elements.preview.style[CSS_TRANSFORM]),\r\n            pc = new TransformOrigin(self.elements.preview),\r\n            top = (vpData.top - data.top) + (vpData.height / 2),\r\n            left = (vpData.left - data.left) + (vpData.width / 2),\r\n            center = {},\r\n            adj = {};\r\n\r\n        if (rotate) {\r\n            var cx = pc.x;\r\n            var cy = pc.y;\r\n            var tx = transform.x;\r\n            var ty = transform.y;\r\n\r\n            center.y = cx;\r\n            center.x = cy;\r\n            transform.y = tx;\r\n            transform.x = ty;\r\n        }\r\n        else {\r\n            center.y = top / scale;\r\n            center.x = left / scale;\r\n\r\n            adj.y = (center.y - pc.y) * (1 - scale);\r\n            adj.x = (center.x - pc.x) * (1 - scale);\r\n\r\n            transform.x -= adj.x;\r\n            transform.y -= adj.y;\r\n        }\r\n\r\n        var newCss = {};\r\n        newCss[CSS_TRANS_ORG] = center.x + 'px ' + center.y + 'px';\r\n        newCss[CSS_TRANSFORM] = transform.toString();\r\n        css(self.elements.preview, newCss);\r\n    }\r\n\r\n    function _initDraggable() {\r\n        var self = this,\r\n            isDragging = false,\r\n            originalX,\r\n            originalY,\r\n            originalDistance,\r\n            vpRect,\r\n            transform;\r\n\r\n        function assignTransformCoordinates(deltaX, deltaY) {\r\n            var imgRect = self.elements.preview.getBoundingClientRect(),\r\n                top = transform.y + deltaY,\r\n                left = transform.x + deltaX;\r\n\r\n            if (self.options.enforceBoundary) {\r\n                if (vpRect.top > imgRect.top + deltaY && vpRect.bottom < imgRect.bottom + deltaY) {\r\n                    transform.y = top;\r\n                }\r\n\r\n                if (vpRect.left > imgRect.left + deltaX && vpRect.right < imgRect.right + deltaX) {\r\n                    transform.x = left;\r\n                }\r\n            }\r\n            else {\r\n                transform.y = top;\r\n                transform.x = left;\r\n            }\r\n        }\r\n\r\n        function toggleGrabState(isDragging) {\r\n          self.elements.preview.setAttribute('aria-grabbed', isDragging);\r\n          self.elements.boundary.setAttribute('aria-dropeffect', isDragging? 'move': 'none');\r\n        }\r\n\r\n        function keyDown(ev) {\r\n            var LEFT_ARROW  = 37,\r\n                UP_ARROW    = 38,\r\n                RIGHT_ARROW = 39,\r\n                DOWN_ARROW  = 40;\r\n\r\n            if (ev.shiftKey && (ev.keyCode === UP_ARROW || ev.keyCode === DOWN_ARROW)) {\r\n                var zoom;\r\n                if (ev.keyCode === UP_ARROW) {\r\n                    zoom = parseFloat(self.elements.zoomer.value) + parseFloat(self.elements.zoomer.step)\r\n                }\r\n                else {\r\n                    zoom = parseFloat(self.elements.zoomer.value) - parseFloat(self.elements.zoomer.step)\r\n                }\r\n                self.setZoom(zoom);\r\n            }\r\n            else if (self.options.enableKeyMovement && (ev.keyCode >= 37 && ev.keyCode <= 40)) {\r\n                ev.preventDefault();\r\n                var movement = parseKeyDown(ev.keyCode);\r\n\r\n                transform = Transform.parse(self.elements.preview);\r\n                document.body.style[CSS_USERSELECT] = 'none';\r\n                vpRect = self.elements.viewport.getBoundingClientRect();\r\n                keyMove(movement);\r\n            }\r\n\r\n            function parseKeyDown(key) {\r\n                switch (key) {\r\n                    case LEFT_ARROW:\r\n                        return [1, 0];\r\n                    case UP_ARROW:\r\n                        return [0, 1];\r\n                    case RIGHT_ARROW:\r\n                        return [-1, 0];\r\n                    case DOWN_ARROW:\r\n                        return [0, -1];\r\n                }\r\n            }\r\n        }\r\n\r\n        function keyMove(movement) {\r\n            var deltaX = movement[0],\r\n                deltaY = movement[1],\r\n                newCss = {};\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            if (ev.button !== undefined && ev.button !== 0) return;\r\n\r\n            ev.preventDefault();\r\n            if (isDragging) return;\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n            toggleGrabState(isDragging);\r\n            transform = Transform.parse(self.elements.preview);\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n            vpRect = self.elements.viewport.getBoundingClientRect();\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            ev.preventDefault();\r\n            var pageX = ev.pageX,\r\n                pageY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX,\r\n                deltaY = pageY - originalY,\r\n                newCss = {};\r\n\r\n            if (ev.type === 'touchmove') {\r\n                if (ev.touches.length > 1) {\r\n                    var touch1 = ev.touches[0];\r\n                    var touch2 = ev.touches[1];\r\n                    var dist = Math.sqrt((touch1.pageX - touch2.pageX) * (touch1.pageX - touch2.pageX) + (touch1.pageY - touch2.pageY) * (touch1.pageY - touch2.pageY));\r\n\r\n                    if (!originalDistance) {\r\n                        originalDistance = dist / self._currentZoom;\r\n                    }\r\n\r\n                    var scale = dist / originalDistance;\r\n\r\n                    _setZoomerVal.call(self, scale);\r\n                    dispatchChange(self.elements.zoomer);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            toggleGrabState(isDragging);\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        self.elements.overlay.addEventListener('mousedown', mouseDown);\r\n        self.elements.viewport.addEventListener('keydown', keyDown);\r\n        self.elements.overlay.addEventListener('touchstart', mouseDown);\r\n    }\r\n\r\n    function _updateOverlay() {\r\n        if (!this.elements) return; // since this is debounced, it can be fired after destroy\r\n        var self = this,\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = self.elements.preview.getBoundingClientRect();\r\n\r\n        css(self.elements.overlay, {\r\n            width: imgData.width + 'px',\r\n            height: imgData.height + 'px',\r\n            top: (imgData.top - boundRect.top) + 'px',\r\n            left: (imgData.left - boundRect.left) + 'px'\r\n        });\r\n    }\r\n    var _debouncedOverlay = debounce(_updateOverlay, 500);\r\n\r\n    function _triggerUpdate() {\r\n        var self = this,\r\n            data = self.get();\r\n\r\n        if (!_isVisible.call(self)) {\r\n            return;\r\n        }\r\n\r\n        self.options.update.call(self, data);\r\n        if (self.$ && typeof Prototype === 'undefined') {\r\n            self.$(self.element).trigger('update.croppie', data);\r\n        }\r\n        else {\r\n            var ev;\r\n            if (window.CustomEvent) {\r\n                ev = new CustomEvent('update', { detail: data });\r\n            } else {\r\n                ev = document.createEvent('CustomEvent');\r\n                ev.initCustomEvent('update', true, true, data);\r\n            }\r\n\r\n            self.element.dispatchEvent(ev);\r\n        }\r\n    }\r\n\r\n    function _isVisible() {\r\n        return this.elements.preview.offsetHeight > 0 && this.elements.preview.offsetWidth > 0;\r\n    }\r\n\r\n    function _updatePropertiesFromImage() {\r\n        var self = this,\r\n            initialZoom = 1,\r\n            cssReset = {},\r\n            img = self.elements.preview,\r\n            imgData,\r\n            transformReset = new Transform(0, 0, initialZoom),\r\n            originReset = new TransformOrigin(),\r\n            isVisible = _isVisible.call(self);\r\n\r\n        if (!isVisible || self.data.bound) {// if the croppie isn't visible or it doesn't need binding\r\n            return;\r\n        }\r\n\r\n        self.data.bound = true;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        cssReset[CSS_TRANS_ORG] = originReset.toString();\r\n        cssReset['opacity'] = 1;\r\n        css(img, cssReset);\r\n\r\n        imgData = self.elements.preview.getBoundingClientRect();\r\n\r\n        self._originalImageWidth = imgData.width;\r\n        self._originalImageHeight = imgData.height;\r\n        self.data.orientation = _hasExif.call(self) ? getExifOrientation(self.elements.img) : self.data.orientation;\r\n\r\n        if (self.options.enableZoom) {\r\n            _updateZoomLimits.call(self, true);\r\n        }\r\n        else {\r\n            self._currentZoom = initialZoom;\r\n        }\r\n\r\n        transformReset.scale = self._currentZoom;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        css(img, cssReset);\r\n\r\n        if (self.data.points.length) {\r\n            _bindPoints.call(self, self.data.points);\r\n        }\r\n        else {\r\n            _centerImage.call(self);\r\n        }\r\n\r\n        _updateCenterPoint.call(self);\r\n        _updateOverlay.call(self);\r\n    }\r\n\r\n    function _updateZoomLimits (initial) {\r\n        var self = this,\r\n            minZoom = Math.max(self.options.minZoom, 0) || 0,\r\n            maxZoom = self.options.maxZoom || 1.5,\r\n            initialZoom,\r\n            defaultInitialZoom,\r\n            zoomer = self.elements.zoomer,\r\n            scale = parseFloat(zoomer.value),\r\n            boundaryData = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = naturalImageDimensions(self.elements.img, self.data.orientation),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            minW,\r\n            minH;\r\n        if (self.options.enforceBoundary) {\r\n            minW = vpData.width / imgData.width;\r\n            minH = vpData.height / imgData.height;\r\n            minZoom = Math.max(minW, minH);\r\n        }\r\n\r\n        if (minZoom >= maxZoom) {\r\n            maxZoom = minZoom + 1;\r\n        }\r\n\r\n        zoomer.min = fix(minZoom, 4);\r\n        zoomer.max = fix(maxZoom, 4);\r\n\r\n        if (!initial && (scale < zoomer.min || scale > zoomer.max)) {\r\n            _setZoomerVal.call(self, scale < zoomer.min ? zoomer.min : zoomer.max);\r\n        }\r\n        else if (initial) {\r\n            defaultInitialZoom = Math.max((boundaryData.width / imgData.width), (boundaryData.height / imgData.height));\r\n            initialZoom = self.data.boundZoom !== null ? self.data.boundZoom : defaultInitialZoom;\r\n            _setZoomerVal.call(self, initialZoom);\r\n        }\r\n\r\n        dispatchChange(zoomer);\r\n    }\r\n\r\n    function _bindPoints(points) {\r\n        if (points.length !== 4) {\r\n            throw \"Croppie - Invalid number of points supplied: \" + points;\r\n        }\r\n        var self = this,\r\n            pointsWidth = points[2] - points[0],\r\n            // pointsHeight = points[3] - points[1],\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            vpOffset = {\r\n                left: vpData.left - boundRect.left,\r\n                top: vpData.top - boundRect.top\r\n            },\r\n            scale = vpData.width / pointsWidth,\r\n            originTop = points[1],\r\n            originLeft = points[0],\r\n            transformTop = (-1 * points[1]) + vpOffset.top,\r\n            transformLeft = (-1 * points[0]) + vpOffset.left,\r\n            newCss = {};\r\n\r\n        newCss[CSS_TRANS_ORG] = originLeft + 'px ' + originTop + 'px';\r\n        newCss[CSS_TRANSFORM] = new Transform(transformLeft, transformTop, scale).toString();\r\n        css(self.elements.preview, newCss);\r\n\r\n        _setZoomerVal.call(self, scale);\r\n        self._currentZoom = scale;\r\n    }\r\n\r\n    function _centerImage() {\r\n        var self = this,\r\n            imgDim = self.elements.preview.getBoundingClientRect(),\r\n            vpDim = self.elements.viewport.getBoundingClientRect(),\r\n            boundDim = self.elements.boundary.getBoundingClientRect(),\r\n            vpLeft = vpDim.left - boundDim.left,\r\n            vpTop = vpDim.top - boundDim.top,\r\n            w = vpLeft - ((imgDim.width - vpDim.width) / 2),\r\n            h = vpTop - ((imgDim.height - vpDim.height) / 2),\r\n            transform = new Transform(w, h, self._currentZoom);\r\n\r\n        css(self.elements.preview, CSS_TRANSFORM, transform.toString());\r\n    }\r\n\r\n    function _transferImageToCanvas(customOrientation) {\r\n        var self = this,\r\n            canvas = self.elements.canvas,\r\n            img = self.elements.img,\r\n            ctx = canvas.getContext('2d');\r\n\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        var orientation = self.options.enableOrientation && customOrientation || getExifOrientation(img);\r\n        drawCanvas(canvas, img, orientation);\r\n    }\r\n\r\n    function _getCanvas(data) {\r\n        var self = this,\r\n            points = data.points,\r\n            left = num(points[0]),\r\n            top = num(points[1]),\r\n            right = num(points[2]),\r\n            bottom = num(points[3]),\r\n            width = right-left,\r\n            height = bottom-top,\r\n            circle = data.circle,\r\n            canvas = document.createElement('canvas'),\r\n            ctx = canvas.getContext('2d'),\r\n            startX = 0,\r\n            startY = 0,\r\n            canvasWidth = data.outputWidth || width,\r\n            canvasHeight = data.outputHeight || height;\r\n\r\n        canvas.width = canvasWidth;\r\n        canvas.height = canvasHeight;\r\n\r\n        if (data.backgroundColor) {\r\n            ctx.fillStyle = data.backgroundColor;\r\n            ctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n        }\r\n\r\n        // By default assume we're going to draw the entire\r\n        // source image onto the destination canvas.\r\n        var sx = left,\r\n            sy = top,\r\n            sWidth = width,\r\n            sHeight = height,\r\n            dx = 0,\r\n            dy = 0,\r\n            dWidth = canvasWidth,\r\n            dHeight = canvasHeight;\r\n\r\n        //\r\n        // Do not go outside of the original image's bounds along the x-axis.\r\n        // Handle translations when projecting onto the destination canvas.\r\n        //\r\n\r\n        // The smallest possible source x-position is 0.\r\n        if (left < 0) {\r\n            sx = 0;\r\n            dx = (Math.abs(left) / width) * canvasWidth;\r\n        }\r\n\r\n        // The largest possible source width is the original image's width.\r\n        if (sWidth + sx > self._originalImageWidth) {\r\n            sWidth = self._originalImageWidth - sx;\r\n            dWidth =  (sWidth / width) * canvasWidth;\r\n        }\r\n\r\n        //\r\n        // Do not go outside of the original image's bounds along the y-axis.\r\n        //\r\n\r\n        // The smallest possible source y-position is 0.\r\n        if (top < 0) {\r\n            sy = 0;\r\n            dy = (Math.abs(top) / height) * canvasHeight;\r\n        }\r\n\r\n        // The largest possible source height is the original image's height.\r\n        if (sHeight + sy > self._originalImageHeight) {\r\n            sHeight = self._originalImageHeight - sy;\r\n            dHeight = (sHeight / height) * canvasHeight;\r\n        }\r\n\r\n        // console.table({ left, right, top, bottom, canvasWidth, canvasHeight, width, height, startX, startY, circle, sx, sy, dx, dy, sWidth, sHeight, dWidth, dHeight });\r\n\r\n        ctx.drawImage(this.elements.preview, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\r\n        if (circle) {\r\n            ctx.fillStyle = '#fff';\r\n            ctx.globalCompositeOperation = 'destination-in';\r\n            ctx.beginPath();\r\n            ctx.arc(canvas.width / 2, canvas.height / 2, canvas.width / 2, 0, Math.PI * 2, true);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n        }\r\n        return canvas;\r\n    }\r\n\r\n    function _getHtmlResult(data) {\r\n        var points = data.points,\r\n            div = document.createElement('div'),\r\n            img = document.createElement('img'),\r\n            width = points[2] - points[0],\r\n            height = points[3] - points[1];\r\n\r\n        addClass(div, 'croppie-result');\r\n        div.appendChild(img);\r\n        css(img, {\r\n            left: (-1 * points[0]) + 'px',\r\n            top: (-1 * points[1]) + 'px'\r\n        });\r\n        img.src = data.url;\r\n        css(div, {\r\n            width: width + 'px',\r\n            height: height + 'px'\r\n        });\r\n\r\n        return div;\r\n    }\r\n\r\n    function _getBase64Result(data) {\r\n        return _getCanvas.call(this, data).toDataURL(data.format, data.quality);\r\n    }\r\n\r\n    function _getBlobResult(data) {\r\n        var self = this;\r\n        return new Promise(function (resolve) {\r\n            _getCanvas.call(self, data).toBlob(function (blob) {\r\n                resolve(blob);\r\n            }, data.format, data.quality);\r\n        });\r\n    }\r\n\r\n    function _replaceImage(img) {\r\n        if (this.elements.img.parentNode) {\r\n            Array.prototype.forEach.call(this.elements.img.classList, function(c) { img.classList.add(c); });\r\n            this.elements.img.parentNode.replaceChild(img, this.elements.img);\r\n            this.elements.preview = img; // if the img is attached to the DOM, they're not using the canvas\r\n        }\r\n        this.elements.img = img;\r\n    }\r\n\r\n    function _bind(options, cb) {\r\n        var self = this,\r\n            url,\r\n            points = [],\r\n            zoom = null,\r\n            hasExif = _hasExif.call(self);\r\n\r\n        if (typeof (options) === 'string') {\r\n            url = options;\r\n            options = {};\r\n        }\r\n        else if (Array.isArray(options)) {\r\n            points = options.slice();\r\n        }\r\n        else if (typeof (options) === 'undefined' && self.data.url) { //refreshing\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            return null;\r\n        }\r\n        else {\r\n            url = options.url;\r\n            points = options.points || [];\r\n            zoom = typeof(options.zoom) === 'undefined' ? null : options.zoom;\r\n        }\r\n\r\n        self.data.bound = false;\r\n        self.data.url = url || self.data.url;\r\n        self.data.boundZoom = zoom;\r\n\r\n        return loadImage(url, hasExif).then(function (img) {\r\n            _replaceImage.call(self, img);\r\n            if (!points.length) {\r\n                var natDim = naturalImageDimensions(img);\r\n                var rect = self.elements.viewport.getBoundingClientRect();\r\n                var aspectRatio = rect.width / rect.height;\r\n                var imgAspectRatio = natDim.width / natDim.height;\r\n                var width, height;\r\n\r\n                if (imgAspectRatio > aspectRatio) {\r\n                    height = natDim.height;\r\n                    width = height * aspectRatio;\r\n                }\r\n                else {\r\n                    width = natDim.width;\r\n                    height = natDim.height / aspectRatio;\r\n                }\r\n\r\n                var x0 = (natDim.width - width) / 2;\r\n                var y0 = (natDim.height - height) / 2;\r\n                var x1 = x0 + width;\r\n                var y1 = y0 + height;\r\n                self.data.points = [x0, y0, x1, y1];\r\n            }\r\n            else if (self.options.relative) {\r\n                points = [\r\n                    points[0] * img.naturalWidth / 100,\r\n                    points[1] * img.naturalHeight / 100,\r\n                    points[2] * img.naturalWidth / 100,\r\n                    points[3] * img.naturalHeight / 100\r\n                ];\r\n            }\r\n\r\n            self.data.orientation = options.orientation || 1;\r\n            self.data.points = points.map(function (p) {\r\n                return parseFloat(p);\r\n            });\r\n            if (self.options.useCanvas) {\r\n                _transferImageToCanvas.call(self, self.data.orientation);\r\n            }\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            cb && cb();\r\n        });\r\n    }\r\n\r\n    function fix(v, decimalPoints) {\r\n        return parseFloat(v).toFixed(decimalPoints || 0);\r\n    }\r\n\r\n    function _get() {\r\n        var self = this,\r\n            imgData = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            x1 = vpData.left - imgData.left,\r\n            y1 = vpData.top - imgData.top,\r\n            widthDiff = (vpData.width - self.elements.viewport.offsetWidth) / 2, //border\r\n            heightDiff = (vpData.height - self.elements.viewport.offsetHeight) / 2,\r\n            x2 = x1 + self.elements.viewport.offsetWidth + widthDiff,\r\n            y2 = y1 + self.elements.viewport.offsetHeight + heightDiff,\r\n            scale = self._currentZoom;\r\n\r\n        if (scale === Infinity || isNaN(scale)) {\r\n            scale = 1;\r\n        }\r\n\r\n        var max = self.options.enforceBoundary ? 0 : Number.NEGATIVE_INFINITY;\r\n        x1 = Math.max(max, x1 / scale);\r\n        y1 = Math.max(max, y1 / scale);\r\n        x2 = Math.max(max, x2 / scale);\r\n        y2 = Math.max(max, y2 / scale);\r\n\r\n        return {\r\n            points: [fix(x1), fix(y1), fix(x2), fix(y2)],\r\n            zoom: scale,\r\n            orientation: self.data.orientation\r\n        };\r\n    }\r\n\r\n    var RESULT_DEFAULTS = {\r\n            type: 'canvas',\r\n            format: 'png',\r\n            quality: 1\r\n        },\r\n        RESULT_FORMATS = ['jpeg', 'webp', 'png'];\r\n\r\n    function _result(options) {\r\n        var self = this,\r\n            data = _get.call(self),\r\n            opts = deepExtend(clone(RESULT_DEFAULTS), clone(options)),\r\n            resultType = (typeof (options) === 'string' ? options : (opts.type || 'base64')),\r\n            size = opts.size || 'viewport',\r\n            format = opts.format,\r\n            quality = opts.quality,\r\n            backgroundColor = opts.backgroundColor,\r\n            circle = typeof opts.circle === 'boolean' ? opts.circle : (self.options.viewport.type === 'circle'),\r\n            vpRect = self.elements.viewport.getBoundingClientRect(),\r\n            ratio = vpRect.width / vpRect.height,\r\n            prom;\r\n\r\n        if (size === 'viewport') {\r\n            data.outputWidth = vpRect.width;\r\n            data.outputHeight = vpRect.height;\r\n        } else if (typeof size === 'object') {\r\n            if (size.width && size.height) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.height;\r\n            } else if (size.width) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.width / ratio;\r\n            } else if (size.height) {\r\n                data.outputWidth = size.height * ratio;\r\n                data.outputHeight = size.height;\r\n            }\r\n        }\r\n\r\n        if (RESULT_FORMATS.indexOf(format) > -1) {\r\n            data.format = 'image/' + format;\r\n            data.quality = quality;\r\n        }\r\n\r\n        data.circle = circle;\r\n        data.url = self.data.url;\r\n        data.backgroundColor = backgroundColor;\r\n\r\n        prom = new Promise(function (resolve) {\r\n            switch(resultType.toLowerCase())\r\n            {\r\n                case 'rawcanvas':\r\n                    resolve(_getCanvas.call(self, data));\r\n                    break;\r\n                case 'canvas':\r\n                case 'base64':\r\n                    resolve(_getBase64Result.call(self, data));\r\n                    break;\r\n                case 'blob':\r\n                    _getBlobResult.call(self, data).then(resolve);\r\n                    break;\r\n                default:\r\n                    resolve(_getHtmlResult.call(self, data));\r\n                    break;\r\n            }\r\n        });\r\n        return prom;\r\n    }\r\n\r\n    function _refresh() {\r\n        _updatePropertiesFromImage.call(this);\r\n    }\r\n\r\n    function _rotate(deg) {\r\n        if (!this.options.useCanvas || !this.options.enableOrientation) {\r\n            throw 'Croppie: Cannot rotate without enableOrientation && EXIF.js included';\r\n        }\r\n\r\n        var self = this,\r\n            canvas = self.elements.canvas;\r\n\r\n        self.data.orientation = getExifOffset(self.data.orientation, deg);\r\n        drawCanvas(canvas, self.elements.img, self.data.orientation);\r\n        _updateCenterPoint.call(self, true);\r\n        _updateZoomLimits.call(self);\r\n\r\n        // Reverses image dimensions if the degrees of rotation is not divisible by 180.\r\n        if ((Math.abs(deg) / 90) % 2 === 1) {\r\n            var oldHeight = self._originalImageHeight;\r\n            var oldWidth = self._originalImageWidth;\r\n            self._originalImageWidth = oldHeight;\r\n            self._originalImageHeight = oldWidth;\r\n        }\r\n    }\r\n\r\n    function _destroy() {\r\n        var self = this;\r\n        self.element.removeChild(self.elements.boundary);\r\n        removeClass(self.element, 'croppie-container');\r\n        if (self.options.enableZoom) {\r\n            self.element.removeChild(self.elements.zoomerWrap);\r\n        }\r\n        delete self.elements;\r\n    }\r\n\r\n    if (typeof window !== 'undefined' && window.jQuery) {\r\n        var $ = window.jQuery;\r\n        $.fn.croppie = function (opts) {\r\n            var ot = typeof opts;\r\n\r\n            if (ot === 'string') {\r\n                var args = Array.prototype.slice.call(arguments, 1);\r\n                var singleInst = $(this).data('croppie');\r\n\r\n                if (opts === 'get') {\r\n                    return singleInst.get();\r\n                }\r\n                else if (opts === 'result') {\r\n                    return singleInst.result.apply(singleInst, args);\r\n                }\r\n                else if (opts === 'bind') {\r\n                    return singleInst.bind.apply(singleInst, args);\r\n                }\r\n\r\n                return this.each(function () {\r\n                    var i = $(this).data('croppie');\r\n                    if (!i) return;\r\n\r\n                    var method = i[opts];\r\n                    if ($.isFunction(method)) {\r\n                        method.apply(i, args);\r\n                        if (opts === 'destroy') {\r\n                            $(this).removeData('croppie');\r\n                        }\r\n                    }\r\n                    else {\r\n                        throw 'Croppie ' + opts + ' method not found';\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                return this.each(function () {\r\n                    var i = new Croppie(this, opts);\r\n                    i.$ = $;\r\n                    $(this).data('croppie', i);\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    function Croppie(element, opts) {\r\n        if (element.className.indexOf('croppie-container') > -1) {\r\n            throw new Error(\"Croppie: Can't initialize croppie more than once\");\r\n        }\r\n        this.element = element;\r\n        this.options = deepExtend(clone(Croppie.defaults), opts);\r\n\r\n        if (this.element.tagName.toLowerCase() === 'img') {\r\n            var origImage = this.element;\r\n            addClass(origImage, 'cr-original-image');\r\n            setAttributes(origImage, {'aria-hidden' : 'true', 'alt' : '' });\r\n            var replacementDiv = document.createElement('div');\r\n            this.element.parentNode.appendChild(replacementDiv);\r\n            replacementDiv.appendChild(origImage);\r\n            this.element = replacementDiv;\r\n            this.options.url = this.options.url || origImage.src;\r\n        }\r\n\r\n        _create.call(this);\r\n        if (this.options.url) {\r\n            var bindOpts = {\r\n                url: this.options.url,\r\n                points: this.options.points\r\n            };\r\n            delete this.options['url'];\r\n            delete this.options['points'];\r\n            _bind.call(this, bindOpts);\r\n        }\r\n    }\r\n\r\n    Croppie.defaults = {\r\n        viewport: {\r\n            width: 100,\r\n            height: 100,\r\n            type: 'square'\r\n        },\r\n        boundary: { },\r\n        orientationControls: {\r\n            enabled: true,\r\n            leftClass: '',\r\n            rightClass: ''\r\n        },\r\n        resizeControls: {\r\n            width: true,\r\n            height: true\r\n        },\r\n        customClass: '',\r\n        showZoomer: true,\r\n        enableZoom: true,\r\n        enableResize: false,\r\n        mouseWheelZoom: true,\r\n        enableExif: false,\r\n        enforceBoundary: true,\r\n        enableOrientation: false,\r\n        enableKeyMovement: true,\r\n        update: function () { }\r\n    };\r\n\r\n    Croppie.globals = {\r\n        translate: 'translate3d'\r\n    };\r\n\r\n    deepExtend(Croppie.prototype, {\r\n        bind: function (options, cb) {\r\n            return _bind.call(this, options, cb);\r\n        },\r\n        get: function () {\r\n            var data = _get.call(this);\r\n            var points = data.points;\r\n            if (this.options.relative) {\r\n                points[0] /= this.elements.img.naturalWidth / 100;\r\n                points[1] /= this.elements.img.naturalHeight / 100;\r\n                points[2] /= this.elements.img.naturalWidth / 100;\r\n                points[3] /= this.elements.img.naturalHeight / 100;\r\n            }\r\n            return data;\r\n        },\r\n        result: function (type) {\r\n            return _result.call(this, type);\r\n        },\r\n        refresh: function () {\r\n            return _refresh.call(this);\r\n        },\r\n        setZoom: function (v) {\r\n            _setZoomerVal.call(this, v);\r\n            dispatchChange(this.elements.zoomer);\r\n        },\r\n        rotate: function (deg) {\r\n            _rotate.call(this, deg);\r\n        },\r\n        destroy: function () {\r\n            return _destroy.call(this);\r\n        }\r\n    });\r\n    return Croppie;\r\n}));"],"file":"croppie.min.js"}