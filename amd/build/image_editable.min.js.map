{"version":3,"sources":["../src/image_editable.js"],"names":["selectors","actions","confirm","cancel","cropimage","rotateleft","rotateright","uploadimage","deleteimage","regions","imagehandler","imagecontrols","alert","zoomslider","editactions","confirmactions","spinner","hiddenFormField","classes","hidden","saving","deleting","disabled","enabled","humanFileSize","size","i","Math","floor","log","pow","toFixed","showImageAlert","target","msg","Templates","render","message","closebutton","iswarning","then","html","js","prependNodeContents","removeImageAlert","querySelector","remove","showSpinner","show","classList","add","showDeleteOption","setAttribute","showEditActions","currentimage","getAttribute","updateImage","args","promise","Ajax","call","methodname","fail","Notification","exception","setBackgroundImage","imageHandler","imageUrl","style","backgroundImage","confirmAction","string","action","newconfirm","cloneNode","parentNode","replaceChild","done","str","innerHTML","addEventListener","e","preventDefault","cancelAction","newcancel","imageCropper","currentImage","croppedImage","Croppie","enableExif","viewport","width","height","type","bind","url","result","imageData","ajaxParams","imagedata","split","imagefilename","cropped","component","filearea","contextid","draftitemid","params","success","destroy","warning","catch","imageRotator","orientation","boundary","enableOrientation","showZoomer","imageUploader","siteMaxBytes","event","file","files","match","backupImage","reader","FileReader","onload","filedata","maxbytesstr","name","img","document","createElement","naturalWidth","fileurl","value","readAsDataURL","imageDelete","contains","defaultImage","init"],"mappings":"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","sourcesContent":["/**\n * This file is part of Moodle - http://moodle.org/\n *\n * Moodle is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Moodle is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @package   image_editable\n * @copyright 2021 Bas Brands\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n import Ajax from 'core/ajax';\n import Croppie from 'qtype_imageselect/croppie';\n import {get_string as getString} from 'core/str';\n import Templates from 'core/templates';\n import Notification from 'core/notification';\n\n const selectors = {\n     actions: {\n         confirm: '[data-action=\"confirm\"]',\n         cancel: '[data-action=\"cancel\"]',\n         cropimage: '[data-action=\"cropimage\"]',\n         rotateleft: '[data-action=\"rotateleft\"]',\n         rotateright: '[data-action=\"rotateright\"]',\n         uploadimage: '[data-action=\"uploadimage\"]',\n         deleteimage: '[data-action=\"deleteimage\"]'\n     },\n     regions: {\n         imagehandler: '[data-region=\"imagehandler\"]',\n         imagecontrols: '[data-region=\"imagecontrols\"]',\n         alert: '.alert',\n         zoomslider: '.cr-slider',\n         editactions: '[data-region=\"editactions\"]',\n         confirmactions: '[data-region=\"confirmactions\"]',\n         spinner: '[data-region=\"spinner\"]',\n         hiddenFormField: '[data-region=\"hiddenformfield\"]'\n     },\n     classes: {\n         hidden: 'd-none',\n         saving: 'saving',\n         deleting: 'deleting',\n         disabled: 'disabled',\n         enabled: 'js-enabled'\n     }\n };\n /**\n  * Get human file size from bytes.\n  *\n  * @param {Int} size\n  * @returns {string} the human readable size string\n  */\n  export const humanFileSize = size => {\n     const i = Math.floor(Math.log(size) / Math.log(1024));\n     return (size / Math.pow(1024, i)).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n };\n /**\n  * Show an alert on the image.\n  * @param  {HTMLElement} target DOM node of the editable image\n  * @param  {String} msg Message to show in the alert\n  * @return {Promise} Template promise.\n  */\n const showImageAlert = (target, msg) => {\n     return Templates.render('core/notification', {\n         message: msg,\n         closebutton: true,\n         iswarning: true\n     }).then((html, js) => {\n         Templates.prependNodeContents(target, html, js);\n         return;\n     });\n };\n\n /**\n  * Remove the image alert.\n  * @param {HTMLElement} target DOM node of the editable image\n  */\n const removeImageAlert = target => {\n     const alert = target.querySelector(selectors.regions.alert);\n     if (alert) {\n         alert.remove();\n     }\n };\n\n /**\n  * Show the spinner.\n  * @param  {HTMLElement} target DOM node of the editable image\n  * @param  {Bool} show\n  */\n const showSpinner = (target, show) => {\n     const spinner = target.querySelector(selectors.regions.spinner);\n     if (show) {\n         spinner.classList.remove(selectors.classes.hidden);\n     } else {\n         spinner.classList.add(selectors.classes.hidden);\n     }\n };\n\n /**\n  * Show delete option\n  * @param  {HTMLElement} target DOM node of the editable image\n  * @param  {Bool} show\n  */\n  const showDeleteOption = (target, show) => {\n     const deleteimage = target.querySelector(selectors.actions.deleteimage);\n     if (show) {\n         deleteimage.classList.add(selectors.classes.enabled);\n         deleteimage.setAttribute('tabindex', 0);\n     } else {\n         deleteimage.classList.remove(selectors.classes.enabled);\n         deleteimage.setAttribute('tabindex', -1);\n     }\n  };\n\n /**\n  * Show the edit actions upload image and crop image, this hides\n  * the confirm actions.\n  * @param  {HTMLElement} target DOM node of the editable image\n  */\n const showEditActions = target => {\n     const currentimage = target.getAttribute('data-currentimage');\n     const cropimage = target.querySelector(selectors.actions.cropimage);\n     const confirmactions = target.querySelector(selectors.regions.confirmactions);\n     const editactions = target.querySelector(selectors.regions.editactions);\n\n     if (currentimage) {\n         cropimage.classList.remove(selectors.classes.hidden);\n         showDeleteOption(target, true);\n     } else {\n         cropimage.classList.add(selectors.classes.hidden);\n         showDeleteOption(target, false);\n     }\n\n     confirmactions.classList.add(selectors.classes.hidden);\n     editactions.classList.remove(selectors.classes.hidden);\n\n\n     removeImageAlert(target);\n };\n\n /**\n  * Save an image from the image handler\n  * @param {Object} args The request arguments\n  * @return {Promise} Resolved with an array file the stored file url.\n  */\n const updateImage = args => {\n     const request = {\n         methodname: 'qtype_imageselect_imageeditable_update_image',\n         args: args\n     };\n\n     let promise = Ajax.call([request])[0]\n         .fail(Notification.exception);\n\n     return promise;\n };\n\n /**\n  * Set the background image\n  * @param {HTMLElement} imageHandler DOM node of the editable image\n  * @param {String} imageUrl the new background image url or data.\n  */\n const setBackgroundImage = (imageHandler, imageUrl) => {\n     imageHandler.style.backgroundImage = 'url(\"' + imageUrl + '\")';\n };\n\n /**\n  * Show the confirm actions, this hides the edit actions.\n  * @param {HTMLElement} target DOM node of the editable image wrapper\n  * @param {Promise} string promise to show on confirm button.\n  * @param {function} action to execute.\n  */\n const confirmAction = (target, string, action) => {\n     const confirmactions = target.querySelector(selectors.regions.confirmactions);\n     const editactions = target.querySelector(selectors.regions.editactions);\n     const confirm = target.querySelector(selectors.actions.confirm);\n\n     // Create a new button to remove all old event listeners.\n     const newconfirm = confirm.cloneNode(true);\n     confirm.parentNode.replaceChild(newconfirm, confirm);\n\n     string.done(str => {\n         newconfirm.innerHTML = str;\n\n         confirmactions.classList.remove(selectors.classes.hidden);\n         editactions.classList.add(selectors.classes.hidden);\n\n         newconfirm.addEventListener('click', e => {\n             action();\n             e.preventDefault();\n         });\n     });\n     showDeleteOption(target, false);\n };\n\n /**\n  * Show the cancel actions.\n  * @param {HTMLElement} target DOM node of the editable image wrapper\n  * @param {function} action callback to execute.\n  */\n const cancelAction = (target, action) => {\n     let cancel = target.querySelector(selectors.actions.cancel);\n\n     // Create a new button to remove all old event listeners.\n     const newcancel = cancel.cloneNode(true);\n     cancel.parentNode.replaceChild(newcancel, cancel);\n\n     newcancel.addEventListener('click', e => {\n         action();\n         e.preventDefault();\n     });\n };\n\n /**\n  * Crop the current image.\n  * @param {HTMLElement} target DOM node of the editable image wrapper.\n  */\n const imageCropper = target => {\n     const imageHandler = target.querySelector(selectors.regions.imagehandler);\n\n     let currentImage = target.getAttribute('data-currentimage');\n\n     const size = target.getAttribute('data-size');\n\n     const croppedImage = new Croppie(imageHandler, {\n         enableExif: true,\n         viewport: {\n             width: (size / 100) * (90),\n             height: (size / 100) * (90),\n             type: 'square'\n         },\n\n     });\n     croppedImage.bind({\n         url: currentImage,\n     });\n\n     setBackgroundImage(imageHandler, '');\n\n     const zoomslider = target.querySelector(selectors.regions.zoomslider);\n     zoomslider.classList.add('form-control-range');\n     // Increase the slider step size so it is keyboard accessible.\n     zoomslider.setAttribute('step', 0.01);\n\n     // Makes the viewport look like a circle\n     if (target.getAttribute('data-rounded') === 'rounded') {\n         target.querySelector('.cr-viewport').classList.add('cr-vp-circle');\n     }\n\n     confirmAction(target, getString('cropimage', 'qtype_imageselect'), () => {\n         croppedImage.result('base64').then(imageData => {\n\n             let ajaxParams = {\n                 imagedata: imageData.split('base64,')[1],\n                 imagefilename: 'cropped.png',\n                 cropped: 1,\n                 component: target.getAttribute('data-component'),\n                 filearea: target.getAttribute('data-filearea'),\n                 contextid: target.getAttribute('data-contextid'),\n                 draftitemid: target.getAttribute('data-draftitemid')\n             };\n\n             showSpinner(target, true);\n\n             updateImage({params: ajaxParams}).then(result => {\n                 if (result.success) {\n                     setBackgroundImage(imageHandler, imageData);\n                     croppedImage.destroy();\n                 }\n                 if (result.warning) {\n                     showImageAlert(imageHandler, result.warning, 'warning');\n                 }\n                 showSpinner(target, false);\n                 showEditActions(target);\n                 return;\n             }).catch(Notification.exception);\n             return;\n         }).catch(Notification.exception);\n     });\n\n     cancelAction(target, () => {\n         croppedImage.destroy();\n         setBackgroundImage(imageHandler, currentImage);\n         showEditActions(target);\n     });\n };\n const imageRotator = (target, orientation) => {\n     const imageHandler = target.querySelector(selectors.regions.imagehandler);\n\n     let currentImage = target.getAttribute('data-currentimage');\n     const size = target.getAttribute('data-size');\n\n     const croppedImage = new Croppie(imageHandler, {\n         enableExif: true,\n         viewport: {\n             width: (size / 100) * (100),\n             height: (size / 100) * (100),\n             boundary:{width:300, height:300},\n             type: 'square',\n         },\n         enableOrientation: true,\n         showZoomer: false,\n     });\n     croppedImage.bind({\n         url: currentImage,\n         orientation: orientation\n     });\n\n     setBackgroundImage(imageHandler, '');\n\n     confirmAction(target, getString('confirm', 'qtype_imageselect'), () => {\n         croppedImage.result('base64').then(imageData => {\n\n             let ajaxParams = {\n                 imagedata: imageData.split('base64,')[1],\n                 imagefilename: 'rotated.png',\n                 cropped: 1,\n                 component: target.getAttribute('data-component'),\n                 filearea: target.getAttribute('data-filearea'),\n                 contextid: target.getAttribute('data-contextid'),\n                 draftitemid: target.getAttribute('data-draftitemid')\n             };\n\n             showSpinner(target, true);\n\n             updateImage({params: ajaxParams}).then(result => {\n                 if (result.success) {\n                     setBackgroundImage(imageHandler, imageData);\n                     croppedImage.destroy();\n                 }\n                 if (result.warning) {\n                     showImageAlert(imageHandler, result.warning, 'warning');\n                 }\n                 showSpinner(target, false);\n                 showEditActions(target);\n                 return;\n             }).catch(Notification.exception);\n             return;\n         }).catch(Notification.exception);\n     });\n\n     cancelAction(target, () => {\n         croppedImage.destroy();\n         setBackgroundImage(imageHandler, currentImage);\n         showEditActions(target);\n     });\n };\n //End\n /**\n  * Upload a new image.\n  * @param {HTMLElement} target DOM node of the editable image wrapper.\n  * @param {Int} siteMaxBytes the maximum size for these images.\n  * @param {Event} event the event listener event.\n  */\n const imageUploader = (target, siteMaxBytes, event) => {\n     const imageHandler = target.querySelector(selectors.regions.imagehandler);\n\n     const hiddenFormField = target.querySelector(selectors.regions.hiddenFormField);\n\n     let file = event.target.files[0];\n\n     // Only process image files.\n     if (!file.type.match('image.*')) {\n         return;\n     }\n\n     let backupImage = target.getAttribute('data-currentimage');\n\n     if (backupImage === '') {\n         backupImage = target.getAttribute('data-defaultimage');\n     }\n\n     var reader = new FileReader();\n     reader.onload = (() => {\n         let filedata = reader.result;\n\n         if (file.size > siteMaxBytes) {\n             const maxbytesstr = {\n                 size: humanFileSize(siteMaxBytes),\n                 file: file.name\n             };\n             getString('maxbytesfile', 'error', maxbytesstr).done(message => {\n                 showImageAlert(imageHandler, message);\n             });\n             return;\n         }\n\n         // Warn if image resolution is too small.\n         let img = document.createElement('img');\n         img.setAttribute('src', filedata);\n         img.addEventListener('load', () => {\n             if (img.naturalWidth < 512) {\n                 getString('resolutionlow', 'qtype_imageselect').done(message => {\n                     showImageAlert(imageHandler, message);\n                 });\n             }\n         });\n         setBackgroundImage(imageHandler, filedata);\n\n         let ajaxParams = {\n             imagefilename: file.name,\n             imagedata: filedata.split('base64,')[1],\n             cropped: 0,\n             component: target.getAttribute('data-component'),\n             filearea: target.getAttribute('data-filearea'),\n             contextid: target.getAttribute('data-contextid'),\n             draftitemid: target.getAttribute('data-draftitemid')\n         };\n\n         confirmAction(target, getString('save', 'admin'), () => {\n             showSpinner(target, true);\n             updateImage({params: ajaxParams}).then(result => {\n                 if (result.success) {\n                     target.setAttribute('data-currentimage', result.fileurl);\n                     backupImage = result.fileurl;\n                 }\n                 if (result.warning) {\n                     showImageAlert(imageHandler, result.warning, 'warning');\n                 }\n                 if (hiddenFormField) {\n                     hiddenFormField.value = ajaxParams.draftitemid;\n                 }\n                 showSpinner(target, false);\n                 showEditActions(target);\n                 return;\n             }).catch(Notification.exception);\n         });\n         cancelAction(target, () => {\n             setBackgroundImage(imageHandler, backupImage);\n             showEditActions(target);\n         });\n     });\n     // Read in the image file as a data URL.\n     reader.readAsDataURL(file);\n };\n\n /**\n  * Delete the image.\n  *\n  * @param {HTMLElement} target DOM node of the editable image wrapper.\n  * @returns {String} empty\n  */\n const imageDelete = target => {\n     const deleteimage = target.querySelector(selectors.actions.deleteimage);\n\n     const hiddenFormField = target.querySelector(selectors.regions.hiddenFormField);\n\n     if (!deleteimage.classList.contains(selectors.classes.enabled)) {\n         return '';\n     }\n\n     const defaultImage = target.getAttribute('data-defaultimage');\n\n     const imageHandler = target.querySelector(selectors.regions.imagehandler);\n\n     let ajaxParams = {\n         imagedata: '',\n         imagefilename: '',\n         cropped: 0,\n         component: target.getAttribute('data-component'),\n         filearea: target.getAttribute('data-filearea'),\n         contextid: target.getAttribute('data-contextid'),\n         draftitemid: target.getAttribute('data-draftitemid'),\n         'delete': 1,\n     };\n\n     confirmAction(target, getString('delete', 'moodle'), () => {\n         showSpinner(target, true);\n         updateImage({params: ajaxParams}).then(result => {\n             if (result.success) {\n                 setBackgroundImage(imageHandler, defaultImage);\n                 target.setAttribute('data-currentimage', '');\n             }\n             if (hiddenFormField) {\n                 hiddenFormField.value = -2;\n             }\n             showSpinner(target, false);\n             showEditActions(target);\n             return '';\n         }).catch(Notification.exception);\n     });\n\n     cancelAction(target, () => {\n         showEditActions(target);\n     });\n     return '';\n };\n\n /**\n  * Initiate the editable image controls.\n  *\n  * @param {HTMLElement} target DOM node of the editable image\n  * @param {int} siteMaxBytes\n  */\n export const init = (target, siteMaxBytes) => {\n     const cropimage = target.querySelector(selectors.actions.cropimage);\n     const rotateleft = target.querySelector(selectors.actions.rotateleft);\n     const rotateright = target.querySelector(selectors.actions.rotateright);\n\n     const uploadimage = target.querySelector(selectors.actions.uploadimage);\n     const deleteimage = target.querySelector(selectors.actions.deleteimage);\n     const imagecontrols = target.querySelector(selectors.regions.imagecontrols);\n\n     // Actions on cropping\n     cropimage.addEventListener('click', e => {\n         imageCropper(target);\n         e.preventDefault();\n     });\n     // Actions on rotateleft\n     rotateleft.addEventListener('click', e => {\n         imageRotator(target, 8);\n         e.preventDefault();\n     });\n     // Actions on rotateleft\n     rotateright.addEventListener('click', e => {\n         imageRotator(target, 6);\n         e.preventDefault();\n     });\n\n     // Process the uploaded file\n     uploadimage.addEventListener('change', e => {\n         imageUploader(target, siteMaxBytes, e);\n         e.preventDefault();\n     });\n\n     // Delete the shown image.\n     deleteimage.addEventListener('click', e => {\n         imageDelete(target);\n         e.preventDefault();\n     });\n\n     showEditActions(target);\n     imagecontrols.classList.add('js-enabled');\n\n };"],"file":"image_editable.min.js"}